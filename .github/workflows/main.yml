name: Mount OSM OBTC

on:
 push:
   branches: ["main"]

jobs:
  thumGen:
    environment: main
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Partner merchants markdown
        id: processVideos
        run: touch output.md
             && curl --location 'https://overpass-api.de/api/interpreter' --header 'Content-Type:text/plain' --data '[out:json][timeout:180];area(3600059470)->.brazil;(node["OBTC"="UAIBIT"](area.brazil););out body;>;out skel qt;' | jq -r '.elements[] |"## \(.tags.name // "Unnamed Location")\n" +"**Type:** \(.type)" + "\n" +"**ID:** \(.id)" + "\n" +"**Coordinates:** \(.lat), \(.lon)\n" +([(.tags["addr:street"] // empty),(.tags["addr:housenumber"] // empty),(.tags["addr:suburb"] // empty),(.tags["addr:city"] // empty),(.tags["addr:postcode"] // empty)] | map(select(length > 0)) | join(", ") | if length > 0 then "**Address:** " + . + "\n" else "" end) +"**Details:**\n" +(.tags| to_entries| map(select(.key | test("^(?!addr:|name$).*")))  | map("- **\(.key):** \(.value)")| join("\n")) + "\n"' > output.md 
